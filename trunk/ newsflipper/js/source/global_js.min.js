var c = 0; var totalcount = -1; function mycarousel_itemLoadCallback(carousel, state) {
    if (carousel.has(carousel.first, carousel.last)) { return; } if (totalcount == c) { c = c - 1; carousel.prev(); return; } jQuery.get("getimage.aspx?r=" + c, function(response) { carousel.add(response.split(';')[0], response.split(';')[1]); totalcount = response.split(';')[2]; });$(document).keydown(function(event) {
        if (event.keyCode == 37) {
            carousel.prev();
        } else if (event.keyCode == 39) { carousel.next(); }
    });    c = c + 1;
}; jQuery(document).ready(function() { jQuery('#mycarousel').jcarousel({ scroll: 1, animation: 200, itemLoadCallback: mycarousel_itemLoadCallback }); });